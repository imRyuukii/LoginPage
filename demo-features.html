<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Demo page showcasing UX enhancements - Toast notifications, form validation, and loading states">
    <meta name="theme-color" content="#8b5cf6">
    <title>UX Features Demo - LoginPage System</title>
    <link rel="icon" type="image/png" sizes="32x32" href="./src/public/images/logo.png">
    <link rel="stylesheet" href="./src/public/css/style.css">
    <script src="./src/public/js/toast.js" defer></script>
    <script src="./src/public/js/form-utils.js" defer></script>
</head>
<body>
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">üåô</button>
    <img src="./src/public/images/logo.png" alt="Logo" class="logo-website-top-left">
    <div class="logo-shadow"></div>

    <div class="container page">
        <!-- Header -->
        <div class="card">
            <h1>üé® UX Features Demo</h1>
            <p style="text-align: center; color: var(--muted);">
                Interactive demonstration of all new user experience enhancements
            </p>
            <div class="link-row centered mt-3">
                <a class="button primary" href="./index.php">Back to Home</a>
                <a class="button" href="./src/docs/ux-enhancements.md">Documentation</a>
            </div>
        </div>

        <!-- Toast Notifications Demo -->
        <div class="card">
            <h2>üîî Toast Notifications</h2>
            <p>Click the buttons below to see different toast notification types:</p>

            <div class="cta-group" style="margin-top: 20px;">
                <button class="button" onclick="Toast.success('Operation completed successfully! ‚úì', 5000)" style="border-color: rgba(34,197,94,0.45);">
                    Show Success
                </button>
                <button class="button" onclick="Toast.error('An error occurred. Please try again.', 5000)" style="border-color: rgba(239,68,68,0.45);">
                    Show Error
                </button>
                <button class="button" onclick="Toast.warning('Please verify your email address before continuing.', 5000)" style="border-color: rgba(245,158,11,0.45);">
                    Show Warning
                </button>
                <button class="button" onclick="Toast.info('Your session will expire in 5 minutes.', 5000)" style="border-color: rgba(99,102,241,0.45);">
                    Show Info
                </button>
            </div>

            <div class="cta-group" style="margin-top: 12px;">
                <button class="button" onclick="showMultipleToasts()">
                    Show Multiple Toasts
                </button>
                <button class="button" onclick="Toast.clearAll()">
                    Clear All Toasts
                </button>
            </div>

            <div style="margin-top: 20px; padding: 12px; background: rgba(99,102,241,0.1); border: 1px solid rgba(99,102,241,0.25); border-radius: 10px;">
                <strong style="color: var(--primary);">Features:</strong>
                <ul style="margin: 8px 0 0 0; padding-left: 20px; color: var(--muted);">
                    <li>Auto-dismiss after 4-5 seconds</li>
                    <li>Manual close with √ó button</li>
                    <li>Smooth slide-in animations</li>
                    <li>Mobile responsive positioning</li>
                    <li>Screen reader accessible</li>
                </ul>
            </div>
        </div>

        <!-- Loading States Demo -->
        <div class="card">
            <h2>‚è≥ Loading States & Spinners</h2>
            <p>Submit the form to see loading states in action:</p>

            <form id="demoLoadingForm" onsubmit="return handleLoadingDemo(event)" style="margin-top: 20px;">
                <label for="demo-input">Demo Input</label>
                <input type="text" id="demo-input" placeholder="Type anything..." required>

                <div class="link-row centered mt-4">
                    <button class="button primary" type="submit" id="loadingBtn">
                        Submit Form
                    </button>
                    <button class="button" type="button" onclick="simulateManualLoading()">
                        Manual Loading Test
                    </button>
                </div>
            </form>

            <div style="margin-top: 20px; padding: 12px; background: rgba(99,102,241,0.1); border: 1px solid rgba(99,102,241,0.25); border-radius: 10px;">
                <strong style="color: var(--primary);">Features:</strong>
                <ul style="margin: 8px 0 0 0; padding-left: 20px; color: var(--muted);">
                    <li>Button shows spinner and "Processing..." text</li>
                    <li>All form inputs are disabled</li>
                    <li>Prevents double submission</li>
                    <li>Auto-restores after 3 seconds (demo)</li>
                    <li>CSS-only animations</li>
                </ul>
            </div>
        </div>

        <!-- Form Validation Demo -->
        <div class="card">
            <h2>‚úÖ Real-Time Form Validation</h2>
            <p>Type in the fields to see instant validation feedback:</p>

            <form id="validationDemoForm" onsubmit="return handleValidationDemo(event)" style="margin-top: 20px;">
                <label for="demo-username">Username</label>
                <input type="text" id="demo-username" placeholder="Enter username (3-20 chars, alphanumeric)">
                <div class="field-note">Only letters, numbers, and underscores allowed</div>

                <label for="demo-email">Email Address</label>
                <input type="email" id="demo-email" placeholder="Enter your email address">
                <div class="field-note">We'll validate the format as you type</div>

                <label for="demo-password">Password</label>
                <input type="password" id="demo-password" placeholder="Create a strong password">
                <div class="field-note">Try to make it strong! Use uppercase, lowercase, numbers, and symbols</div>

                <label for="demo-confirm-password">Confirm Password</label>
                <input type="password" id="demo-confirm-password" placeholder="Re-enter your password">
                <div class="field-note">Must match the password above</div>

                <div class="link-row centered mt-4">
                    <button class="button primary" type="submit">
                        Validate & Submit
                    </button>
                    <button class="button" type="button" onclick="resetValidationForm()">
                        Reset Form
                    </button>
                </div>
            </form>

            <div style="margin-top: 20px; padding: 12px; background: rgba(99,102,241,0.1); border: 1px solid rgba(99,102,241,0.25); border-radius: 10px;">
                <strong style="color: var(--primary);">Features:</strong>
                <ul style="margin: 8px 0 0 0; padding-left: 20px; color: var(--muted);">
                    <li>Username: 3-20 characters, alphanumeric + underscore</li>
                    <li>Email: Valid format check (user@domain.com)</li>
                    <li>Password: Strength indicator with progress bar</li>
                    <li>Confirm: Real-time match checking</li>
                    <li>Debounced validation (500ms delay)</li>
                </ul>
            </div>
        </div>

        <!-- Metadata Demo -->
        <div class="card">
            <h2>üîç Enhanced Metadata & SEO</h2>
            <p>This page includes comprehensive metadata for better SEO and social sharing:</p>

            <div style="margin-top: 20px;">
                <h3 style="font-size: 16px; margin-bottom: 10px;">Standard Meta Tags</h3>
                <ul style="margin: 0; padding-left: 20px; color: var(--muted); font-size: 14px;">
                    <li><code>meta name="description"</code> - Page description</li>
                    <li><code>meta name="theme-color"</code> - Brand color (#8b5cf6)</li>
                    <li><code>meta name="viewport"</code> - Mobile optimization</li>
                </ul>

                <h3 style="font-size: 16px; margin: 16px 0 10px 0;">Open Graph Tags (Facebook)</h3>
                <ul style="margin: 0; padding-left: 20px; color: var(--muted); font-size: 14px;">
                    <li><code>og:type</code> - Website type</li>
                    <li><code>og:title</code> - Social sharing title</li>
                    <li><code>og:description</code> - Preview description</li>
                    <li><code>og:image</code> - Preview image</li>
                </ul>

                <h3 style="font-size: 16px; margin: 16px 0 10px 0;">Twitter Card Tags</h3>
                <ul style="margin: 0; padding-left: 20px; color: var(--muted); font-size: 14px;">
                    <li><code>twitter:card</code> - Card type</li>
                    <li><code>twitter:title</code> - Tweet preview title</li>
                    <li><code>twitter:description</code> - Tweet description</li>
                    <li><code>twitter:image</code> - Preview image</li>
                </ul>

                <h3 style="font-size: 16px; margin: 16px 0 10px 0;">Favicons</h3>
                <ul style="margin: 0; padding-left: 20px; color: var(--muted); font-size: 14px;">
                    <li><code>32x32 PNG favicon</code> - Standard browsers</li>
                    <li><code>Apple touch icon</code> - iOS home screen</li>
                </ul>
            </div>

            <div class="link-row centered mt-4">
                <button class="button" onclick="viewPageSource()">
                    View Page Source
                </button>
            </div>
        </div>

        <!-- Feature Summary -->
        <div class="card">
            <h2>üìä Implementation Summary</h2>

            <div style="margin-top: 20px;">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>Status</th>
                            <th>Files</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Toast Notifications</td>
                            <td><span class="badge success">‚úì Active</span></td>
                            <td style="font-size: 12px; color: var(--muted);">toast.js, style.css</td>
                        </tr>
                        <tr>
                            <td>Loading States</td>
                            <td><span class="badge success">‚úì Active</span></td>
                            <td style="font-size: 12px; color: var(--muted);">form-utils.js, style.css</td>
                        </tr>
                        <tr>
                            <td>Form Validation</td>
                            <td><span class="badge success">‚úì Active</span></td>
                            <td style="font-size: 12px; color: var(--muted);">form-utils.js, style.css</td>
                        </tr>
                        <tr>
                            <td>Enhanced Metadata</td>
                            <td><span class="badge success">‚úì Active</span></td>
                            <td style="font-size: 12px; color: var(--muted);">All PHP pages</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; padding: 14px; background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.35); border-radius: 10px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 24px;">‚úÖ</span>
                    <div>
                        <strong style="color: #dcfce7;">All Features Implemented Successfully!</strong><br>
                        <span style="font-size: 14px; color: var(--muted);">
                            Total JS: ~15.5 KB | Total CSS: ~7 KB | Zero external dependencies
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documentation Links -->
        <div class="card">
            <h2>üìö Documentation</h2>
            <p>Learn more about these features:</p>

            <div class="link-row centered mt-3">
                <a class="button" href="./src/docs/ux-enhancements.md" target="_blank">
                    üìñ Full Documentation
                </a>
                <a class="button" href="./src/docs/site-review.md" target="_blank">
                    üîç Code Review
                </a>
                <a class="button" href="./README.md" target="_blank">
                    üìã Project README
                </a>
            </div>
        </div>
    </div>

    <div class="demo-warning">*This is a demo page showing UX enhancements</div>

    <script>
    // Theme toggle functionality
    (function() {
        const root = document.documentElement;
        const stored = localStorage.getItem('theme');
        const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
        const initial = stored || (prefersLight ? 'light' : 'dark');

        if (initial === 'light') {
            root.setAttribute('data-theme', 'light');
        } else {
            root.removeAttribute('data-theme');
        }

        const btn = document.getElementById('themeToggle');

        function setIcon() {
            const isLight = root.getAttribute('data-theme') === 'light';
            btn.textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
            btn.title = isLight ? 'Switch to dark mode' : 'Switch to light mode';
        }

        setIcon();

        btn.addEventListener('click', function() {
            document.body.classList.add('theme-transition');
            const isLight = root.getAttribute('data-theme') === 'light';

            if (isLight) {
                root.removeAttribute('data-theme');
                localStorage.setItem('theme', 'dark');
            } else {
                root.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            }

            setIcon();

            setTimeout(function() {
                document.body.classList.remove('theme-transition');
            }, 320);
        });
    })();

    // Toast notification demos
    function showMultipleToasts() {
        Toast.info('Processing your request...', 8000);
        setTimeout(() => Toast.warning('Verification required', 7000), 500);
        setTimeout(() => Toast.success('All systems operational!', 6000), 1000);
    }

    // Loading state demo
    function handleLoadingDemo(event) {
        event.preventDefault();
        const form = event.target;
        const input = document.getElementById('demo-input');

        Toast.info('Form submitted! Showing loading state...', 3000);

        // Simulate processing
        setTimeout(() => {
            Toast.success('Form processed successfully!', 4000);
            input.value = '';
        }, 3000);

        return false;
    }

    function simulateManualLoading() {
        const form = document.getElementById('demoLoadingForm');
        const btn = document.getElementById('loadingBtn');

        if (window.FormUtils) {
            FormUtils.setLoading(form, btn);
            Toast.info('Manual loading state activated', 3000);

            setTimeout(() => {
                FormUtils.removeLoading(form, btn);
                Toast.success('Loading state removed!', 3000);
            }, 3000);
        }
    }

    // Form validation demo
    function handleValidationDemo(event) {
        event.preventDefault();

        const username = document.getElementById('demo-username').value;
        const email = document.getElementById('demo-email').value;
        const password = document.getElementById('demo-password').value;
        const confirm = document.getElementById('demo-confirm-password').value;

        let valid = true;
        let errors = [];

        if (username.length < 3) {
            errors.push('Username too short');
            valid = false;
        }

        if (!FormUtils.isValidEmail(email)) {
            errors.push('Invalid email format');
            valid = false;
        }

        const passwordCheck = FormUtils.validatePasswordStrength(password);
        if (!passwordCheck.valid) {
            errors.push('Password too weak');
            valid = false;
        }

        if (password !== confirm) {
            errors.push('Passwords do not match');
            valid = false;
        }

        if (valid) {
            Toast.success('‚úì All fields are valid! Form would be submitted in production.', 5000);
        } else {
            Toast.error('‚úó Please fix validation errors: ' + errors.join(', '), 6000);
        }

        return false;
    }

    function resetValidationForm() {
        const form = document.getElementById('validationDemoForm');
        form.reset();

        // Clear all validation feedback
        const feedbacks = form.querySelectorAll('.validation-feedback, .password-strength-indicator');
        feedbacks.forEach(el => el.remove());

        const inputs = form.querySelectorAll('input');
        inputs.forEach(input => {
            input.classList.remove('input-valid', 'input-invalid');
        });

        Toast.info('Form reset complete', 2000);
    }

    function viewPageSource() {
        Toast.info('Right-click on the page and select "View Page Source" to see the metadata tags', 6000);
    }

    // Setup form validation on page load
    window.addEventListener('DOMContentLoaded', function() {
        if (!window.FormUtils) {
            console.error('FormUtils not loaded');
            return;
        }

        // Setup username validation
        const usernameInput = document.getElementById('demo-username');
        if (usernameInput) {
            FormUtils.setupUsernameValidation(usernameInput);
        }

        // Setup email validation
        const emailInput = document.getElementById('demo-email');
        if (emailInput) {
            FormUtils.setupEmailValidation(emailInput);
        }

        // Setup password validation with strength indicator
        const passwordInput = document.getElementById('demo-password');
        if (passwordInput) {
            FormUtils.setupPasswordValidation(passwordInput, true);
        }

        // Setup password confirmation
        const confirmInput = document.getElementById('demo-confirm-password');
        if (passwordInput && confirmInput) {
            FormUtils.setupPasswordConfirmation(passwordInput, confirmInput);
        }

        // Welcome message
        setTimeout(() => {
            Toast.success('Welcome to the UX Features Demo! Try out all the interactive elements.', 5000);
        }, 500);
    });
    </script>
</body>
</html>
